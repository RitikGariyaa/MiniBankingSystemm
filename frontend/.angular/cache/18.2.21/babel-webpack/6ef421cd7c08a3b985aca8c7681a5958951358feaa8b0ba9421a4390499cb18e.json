{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/auth.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nconst _forTrack0 = ($index, $item) => $item.id;\nfunction DashboardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction DashboardComponent_section_9_label_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1, \"Interest % \");\n    i0.ɵɵelement(2, \"input\", 20);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_section_9_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1, \"Overdraft Limit \");\n    i0.ɵɵelement(2, \"input\", 21);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_section_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 11)(1, \"h2\");\n    i0.ɵɵtext(2, \"Create Account\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 12);\n    i0.ɵɵlistener(\"ngSubmit\", function DashboardComponent_section_9_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.submitCreate());\n    });\n    i0.ɵɵelementStart(4, \"label\");\n    i0.ɵɵtext(5, \"Type \");\n    i0.ɵɵelementStart(6, \"select\", 13)(7, \"option\", 14);\n    i0.ɵɵtext(8, \"SAVINGS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 15);\n    i0.ɵɵtext(10, \"CURRENT\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"label\");\n    i0.ɵɵtext(12, \"Opening Balance \");\n    i0.ɵɵelement(13, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, DashboardComponent_section_9_label_14_Template, 3, 0, \"label\", 17)(15, DashboardComponent_section_9_label_15_Template, 3, 0, \"label\", 17);\n    i0.ɵɵelementStart(16, \"div\", 18)(17, \"button\", 19);\n    i0.ɵɵtext(18, \"Create\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.createForm);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createForm.value.accountType === \"SAVINGS\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createForm.value.accountType === \"CURRENT\");\n  }\n}\nfunction DashboardComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_11_For_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_11_For_2_Template_div_click_0_listener() {\n      const acc_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.open(acc_r4));\n    });\n    i0.ɵɵelementStart(1, \"div\", 26)(2, \"span\", 27);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 28);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 29);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 30);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const acc_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(acc_r4.accountType);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"inactive\", acc_r4.status !== \"ACTIVE\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(acc_r4.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"# \", acc_r4.accountNumber, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 6, acc_r4.balance, \"1.2-2\"));\n  }\n}\nfunction DashboardComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵrepeaterCreate(1, DashboardComponent_div_11_For_2_Template, 11, 9, \"div\", 24, _forTrack0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(ctx_r0.accounts);\n  }\n}\nfunction DashboardComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1, \"No accounts yet. Create one to get started.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    auth;\n    fb;\n    router;\n    loading = true;\n    accounts = [];\n    showCreate = false;\n    error = null;\n    createForm; // initialized in constructor\n    constructor(auth, fb, router) {\n      this.auth = auth;\n      this.fb = fb;\n      this.router = router;\n      this.createForm = this.fb.group({\n        accountType: ['SAVINGS', Validators.required],\n        openingBalance: [0, [Validators.min(0)]],\n        interestRate: [null],\n        overdraftLimit: [null]\n      });\n    }\n    ngOnInit() {\n      this.refresh();\n    }\n    toggleCreate() {\n      this.showCreate = !this.showCreate;\n    }\n    refresh() {\n      this.loading = true;\n      this.auth.listAccounts().subscribe({\n        next: accs => {\n          this.accounts = accs;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err?.error?.message || 'Failed to load accounts';\n          this.loading = false;\n        }\n      });\n    }\n    submitCreate() {\n      if (this.createForm.invalid) {\n        this.createForm.markAllAsTouched();\n        return;\n      }\n      const payload = {\n        ...this.createForm.value\n      };\n      const c = this.auth.getCurrentCustomer();\n      if (!c) {\n        this.error = 'Profile not loaded';\n        return;\n      }\n      payload.customerId = c.id;\n      this.error = null;\n      this.createForm.disable();\n      this.auth.createAccount(payload).subscribe({\n        next: () => {\n          this.createForm.enable();\n          this.showCreate = false;\n          this.createForm.reset({\n            accountType: 'SAVINGS',\n            openingBalance: 0,\n            interestRate: null,\n            overdraftLimit: null\n          });\n          this.refresh();\n        },\n        error: err => {\n          this.createForm.enable();\n          this.error = err?.error?.message || 'Create failed';\n        }\n      });\n    }\n    open(acc) {\n      this.router.navigate(['/accounts', acc.id]);\n    }\n    static ɵfac = function DashboardComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DashboardComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 13,\n      vars: 7,\n      consts: [[1, \"page\"], [1, \"page-title\"], [1, \"actions-bar\"], [1, \"primary\", 3, \"click\"], [1, \"ghost\", 3, \"click\", \"disabled\"], [\"class\", \"inline-error\", 4, \"ngIf\"], [\"class\", \"create-box\", 4, \"ngIf\"], [\"class\", \"skeleton\", 4, \"ngIf\"], [\"class\", \"accounts-grid\", 4, \"ngIf\"], [\"class\", \"empty\", 4, \"ngIf\"], [1, \"inline-error\"], [1, \"create-box\"], [\"novalidate\", \"\", 1, \"grid-4\", 3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"accountType\"], [\"value\", \"SAVINGS\"], [\"value\", \"CURRENT\"], [\"type\", \"number\", \"formControlName\", \"openingBalance\", \"min\", \"0\", \"step\", \"0.01\"], [4, \"ngIf\"], [1, \"full-line\"], [\"type\", \"submit\", 1, \"primary\"], [\"type\", \"number\", \"formControlName\", \"interestRate\", \"step\", \"0.01\"], [\"type\", \"number\", \"formControlName\", \"overdraftLimit\", \"step\", \"0.01\"], [1, \"skeleton\"], [1, \"accounts-grid\"], [\"tabindex\", \"0\", 1, \"acc-card\"], [\"tabindex\", \"0\", 1, \"acc-card\", 3, \"click\"], [1, \"acc-heading\"], [1, \"type\"], [1, \"status\"], [1, \"acc-number\"], [1, \"balance\"], [1, \"empty\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Your Accounts\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_4_listener() {\n            return ctx.toggleCreate();\n          });\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_6_listener() {\n            return ctx.refresh();\n          });\n          i0.ɵɵtext(7, \"Refresh\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(8, DashboardComponent_div_8_Template, 2, 1, \"div\", 5)(9, DashboardComponent_section_9_Template, 19, 3, \"section\", 6)(10, DashboardComponent_div_10_Template, 2, 0, \"div\", 7)(11, DashboardComponent_div_11_Template, 3, 0, \"div\", 8)(12, DashboardComponent_div_12_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.showCreate ? \"Cancel\" : \"New Account\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showCreate);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.accounts.length);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.accounts.length);\n        }\n      },\n      dependencies: [i4.NgIf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.MinValidator, i2.FormGroupDirective, i2.FormControlName, i4.DecimalPipe],\n      styles: [\".page[_ngcontent-%COMP%]{max-width:1200px;margin:1.5rem auto;padding:0 1.2rem;font-family:Arial,Helvetica,sans-serif;color:#fff}.page-title[_ngcontent-%COMP%]{margin:.2rem 0 1rem;font-size:1.55rem;letter-spacing:.5px;font-weight:600}.actions-bar[_ngcontent-%COMP%]{display:flex;gap:.7rem;flex-wrap:wrap;margin-bottom:1rem}button.primary[_ngcontent-%COMP%], button.ghost[_ngcontent-%COMP%]{border:none;padding:.55rem 1rem;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;letter-spacing:.35px;transition:background .2s,opacity .25s}button.primary[_ngcontent-%COMP%]{background:#ffc400;color:#121212}button.primary[_ngcontent-%COMP%]:hover{background:#ffcf33}button.ghost[_ngcontent-%COMP%]{background:#2a2a2a;color:#e1e1e1}button.ghost[_ngcontent-%COMP%]:hover{background:#343434}.inline-error[_ngcontent-%COMP%]{background:#371616;color:#ffb1b1;border:1px solid #5b1d1d;padding:.45rem .7rem;border-radius:6px;font-size:.65rem}.create-box[_ngcontent-%COMP%]{background:#101010;border:1px solid #1e1e1e;padding:1.2rem 1.4rem;border-radius:12px;margin-bottom:1.3rem;box-shadow:0 5px 18px -7px #00000094}.create-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .9rem;font-size:1rem;letter-spacing:.4px;font-weight:600}.grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem;align-items:end}.grid-4[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.65rem;font-weight:600;gap:.35rem;letter-spacing:.35px}.grid-4[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .grid-4[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#1b1b1b;border:1px solid #2A2A2A;color:#fff;padding:.55rem .65rem;border-radius:6px;font-size:.7rem;outline:none;transition:border .2s,background .2s}.grid-4[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .grid-4[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#ffc400;background:#262626}.full-line[_ngcontent-%COMP%]{grid-column:1 / -1}.accounts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:1rem}.acc-card[_ngcontent-%COMP%]{background:#0e0e0e;border:1px solid #1f1f1f;padding:1rem 1.05rem;border-radius:14px;cursor:pointer;display:flex;flex-direction:column;gap:.55rem;transition:transform .15s,background .25s,border .25s;box-shadow:0 3px 14px -6px #0009}.acc-card[_ngcontent-%COMP%]:focus{outline:2px solid #FFC400;outline-offset:2px}.acc-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);background:#141414;border-color:#252525}.acc-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.6rem;font-weight:600;letter-spacing:.5px;color:#cfcfcf}.acc-heading[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#58d58a}.acc-heading[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{color:#ff8c8c}.acc-number[_ngcontent-%COMP%]{font-size:.65rem;color:#9d9d9d}.balance[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#ffc400;letter-spacing:.5px}.empty[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:.75rem;color:#c1c1c1}.skeleton[_ngcontent-%COMP%]{height:120px;display:flex;align-items:center;justify-content:center;color:#888;font-size:.75rem;letter-spacing:.3px}@media (max-width: 650px){.actions-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.acc-card[_ngcontent-%COMP%]{border-radius:12px}}\"]\n    });\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}